<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Compress PDF - EDITSMYPDF</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../assets/styles.css" />
  <link rel="canonical" href="https://editmypdf.tech/features/compress.html" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
      body {
        font-family: "Inter", sans-serif;
        background: #fff;
        color: #111;
        margin: 0;
        padding: 0;
      }
      /* Header replaced by shared component */
      main {
        max-width: 700px;
        margin: 3rem auto;
        padding: 1rem;
        text-align: center;
      }
      h2 {
        font-size: 2rem;
        margin-bottom: 0.5rem;
      }
      p.sub {
        color: #555;
        margin-bottom: 2rem;
      }
      .compress-card {
        border: 1px solid #eee;
        border-radius: 16px;
        padding: 2rem;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      }
      label,
      select,
      input {
        display: block;
        margin: 0.75rem auto;
        font-size: 1rem;
      }
      select,
      input {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 0.6rem 0.9rem;
        width: 200px;
        text-align: center;
      }
      button {
        background: linear-gradient(90deg, #6366f1, #2563eb);
        color: #fff;
        border: none;
        border-radius: 10px;
        padding: 0.9rem 1.8rem;
        font-weight: 600;
        margin-top: 1rem;
        cursor: pointer;
        transition: opacity 0.3s;
      }
      button:hover {
        opacity: 0.9;
      }
      .upload-box {
        border: 2px dashed #ccc;
        border-radius: 12px;
        padding: 2rem;
        margin-top: 1.5rem;
        transition: all 0.2s ease;
        cursor: pointer;
      }
      .upload-box:hover {
        background: #f8faff;
      }
      .upload-box.dragover {
        border-color: #2563eb;
        background: #f8faff;
      }
      .file-info {
        margin-top: 1rem;
        color: #333;
        font-weight: 500;
        font-size: 0.95rem;
      }
      .progress {
        margin-top: 1rem;
        color: #555;
      }
      .ad-box {
        margin-top: 3rem;
        height: 90px;
        background: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #999;
        font-weight: 500;
      }
      /* Footer replaced by shared component */
    </style>
  </head>
  <body>
    <header data-include="navbar"></header>
    <div id="ad-top" class="ad-slot" aria-label="Top advertisement placeholder"></div>

  <main class="feature">
      <h2>Compress PDF</h2>
      <p class="sub">
        Upload your PDF, set desired size, then click ‚ÄúStart Compression‚Äù.
      </p>

  <div class="compress-card">
        <label>Enter desired size:</label>
        <input type="number" id="target-size" placeholder="256" value="256" />
        <select id="size-unit">
          <option value="KB" selected>KB</option>
          <option value="MB">MB</option>
        </select>

        <label class="upload-box" id="drop-zone">
          üìÑ Drop your PDF here or click to upload
          <input
            type="file"
            id="file-input"
            accept="application/pdf"
            style="display: none"
          />
        </label>

        <!-- File info text -->
        <div id="file-info" class="file-info"></div>

        <label for="output-name">Output filename</label>
        <input
          type="text"
          id="output-name"
          placeholder="e.g., compressed"
          value="compressed"
        />

        <button id="start-btn" disabled>Start Compression</button>
        <div class="progress" id="status"></div>
        <button id="download-btn" style="display: none">
          Download Compressed PDF
        </button>
      </div>

  <div id="ad-content" class="ad-slot" aria-label="Content advertisement placeholder"></div>
      <!-- Inline feature blog: replaced with in-depth explainer -->
      <section class="feature-blog" aria-labelledby="compress-blog-title">
        <h3 id="compress-blog-title" class="blog-title">How Our PDF Compressor Works (In Plain English)</h3>
        <p class="sub">You dropped in a big PDF, clicked compress, and‚Äîboom‚Äîyour file got smaller. Here‚Äôs the human-friendly tour of what actually happens, why quality still looks good, and how to get the best results every time.</p>

        <h4>What actually happens under the hood?</h4>
        <p>
          Think of a PDF like a folder. Inside are pages, and each page can hold text, vector drawings, and images. Our tool opens that ‚Äúfolder‚Äù right in your browser and visits each page. For every page, we make a high‚Äëresolution snapshot on an invisible canvas. Then we write those snapshots back into a brand‚Äënew PDF‚Äîbut this time, each page image is saved at a smart, slightly lower quality to reduce the file size.
        </p>
        <p>
          That‚Äôs the core idea: <strong>render ‚Üí snapshot ‚Üí rebuild</strong>. The quality is tuned adaptively so you can aim for a specific size (say <em>256&nbsp;KB</em> or <em>2&nbsp;MB</em>) without crushing readability.
        </p>

        <div class="blog-figures">
          <figure>
            <img src="data:image/svg+xml;utf8,
              <svg xmlns='http://www.w3.org/2000/svg' width='1200' height='700'>
                <rect width='1200' height='700' fill='%23fafbff'/>
                <rect x='70' y='120' width='480' height='420' rx='12' fill='white' stroke='%23d9ddff'/>
                <text x='310' y='165' text-anchor='middle' fill='%23333' font-size='28'>Before</text>
                <rect x='120' y='200' width='380' height='220' rx='8' fill='%23eef2ff' stroke='%23e0e7ff'/>
                <text x='310' y='340' text-anchor='middle' fill='%23666' font-size='18'>~ 4.2 MB</text>
                <rect x='650' y='120' width='480' height='420' rx='12' fill='white' stroke='%23d9ddff'/>
                <text x='890' y='165' text-anchor='middle' fill='%23333' font-size='28'>After</text>
                <rect x='700' y='200' width='380' height='220' rx='8' fill='%23eefaf5' stroke='%23d1fae5'/>
                <text x='890' y='340' text-anchor='middle' fill='%23065f46' font-size='18'>~ 780 KB</text>
              </svg>"
              alt="Before/After size comparison preview" style="width:100%;height:auto;border-radius:12px;">
            <figcaption>Illustration: typical scanned PDFs shrink a lot; vector‚Äëheavy brochures shrink less.</figcaption>
          </figure>
        </div>

        <h4>Step‚Äëby‚Äëstep, from click to download</h4>
        <ol class="blog-steps">
          <li><strong>You choose a target size.</strong> Pick in KB or MB. A realistic goal helps quality.</li>
          <li><strong>We scan your pages.</strong> Each page is rendered to a canvas at a sensible scale.</li>
          <li><strong>We encode images.</strong> The page snapshot is stored as a JPEG with an initial quality.</li>
          <li><strong>We check the size.</strong> If the PDF is still larger than your target, we retry at a slightly lower quality.</li>
          <li><strong>We stop when it fits.</strong> Once it meets the target (or the quality floor), we package your new, smaller PDF.</li>
        </ol>

        <h4>Privacy first: your file stays with you</h4>
        <p>
          Everything happens locally in your browser. We don‚Äôt upload, scan, or store your document ‚Äî and when you close the tab, the working data disappears. It‚Äôs compression without compromise.
        </p>

        <div class="ad-slot" aria-label="In-article advertisement placeholder">Ad</div>

        <h4>Pro tips for best results</h4>
        <ul>
          <li><strong>Start moderate.</strong> Aim for a 40‚Äì60% reduction first. If it still looks great, go lower.</li>
          <li><strong>Check small text.</strong> If tiny fonts look fuzzy, bump the target size up a notch.</li>
          <li><strong>Split and compress.</strong> For huge docs, compress sections separately to keep quality consistent.</li>
          <li><strong>Keep originals safe.</strong> Use a clear output name (e.g., <em>filename‚Äëcompressed.pdf</em>).</li>
        </ul>

        <div class="blog-figures">
          <figure>
            <img src="data:image/svg+xml;utf8,
              <svg xmlns='http://www.w3.org/2000/svg' width='1200' height='560'>
                <rect width='1200' height='560' fill='%23ffffff'/>
                <text x='600' y='70' text-anchor='middle' font-size='24' fill='%23333'>Quality vs. Size</text>
                <line x1='120' y1='460' x2='1080' y2='460' stroke='%23d1d5db' stroke-width='2'/>
                <line x1='120' y1='120' x2='120' y2='460' stroke='%23d1d5db' stroke-width='2'/>
                <polyline fill='none' stroke='%232563eb' stroke-width='4' points='120,180 360,220 600,300 840,380 1080,430'/>
                <circle cx='360' cy='220' r='6' fill='%232563eb'/>
                <circle cx='600' cy='300' r='6' fill='%232563eb'/>
                <circle cx='840' cy='380' r='6' fill='%232563eb'/>
                <text x='1080' y='485' text-anchor='end' font-size='14' fill='%23666'>Smaller size ‚Üí</text>
                <text x='80' y='130' text-anchor='end' font-size='14' fill='%23666'>Higher quality ‚Üí</text>
              </svg>"
              alt="Chart illustration showing quality decreasing as size target lowers"
              style="width:100%;height:auto;border-radius:12px;">
            <figcaption>Lower targets mean smaller files but more aggressive compression. Find your sweet spot.</figcaption>
          </figure>
        </div>

        <h4>Quick FAQs</h4>
        <details>
          <summary>Will links, forms, or selectable text survive?</summary>
          <p>Since pages are flattened into images, interactive elements (links, forms, selectable text) won‚Äôt behave the same afterward. If you need live text, try a lighter target or compress only scan‚Äëheavy sections.</p>
        </details>
        <details>
          <summary>Why does a 1‚Äëpage scan shrink more than a brochure?</summary>
          <p>Scans are just images‚Äîeasy to shrink. Brochures often mix vectors, icons, and crisp text that need more detail to look good, so savings are smaller.</p>
        </details>
        <details>
          <summary>What if the output is still too big?</summary>
          <p>Try a slightly lower target, or split the file and compress parts. Also remove unused pages before compressing‚Äîgarbage in, garbage out.</p>
        </details>

        <p class="note">Ready to try? Drop your PDF above, set a goal, and you‚Äôll see progress as each page is packed and optimized.</p>
      </section>
    </main>
    <div id="ad-footer" class="ad-slot" aria-label="Footer advertisement placeholder"></div>
  <div data-include="footer"></div>

    <script>
      const { jsPDF } = window.jspdf;
      const fileInput = document.getElementById("file-input");
      const dropZone = document.getElementById("drop-zone");
      const startBtn = document.getElementById("start-btn");
      const statusText = document.getElementById("status");
      const downloadBtn = document.getElementById("download-btn");
      const targetInput = document.getElementById("target-size");
      const sizeUnit = document.getElementById("size-unit");
      const fileInfo = document.getElementById("file-info");

      let pdfBytes = null;
      let pdfBlob = null;

      // Drag & drop
      dropZone.addEventListener("dragover", (e) => {
        e.preventDefault();
        dropZone.classList.add("dragover");
      });
      dropZone.addEventListener("dragleave", () =>
        dropZone.classList.remove("dragover")
      );
      dropZone.addEventListener("drop", async (e) => {
        e.preventDefault();
        dropZone.classList.remove("dragover");
        const file = e.dataTransfer.files[0];
        if (file) await loadFile(file);
      });

      // Normal select
      fileInput.addEventListener("click", (e) => e.stopPropagation());
      fileInput.addEventListener("change", async (e) => {
        const file = e.target.files[0];
        if (file) await loadFile(file);
      });

      async function loadFile(file) {
        const sizeMB = (file.size / (1024 * 1024)).toFixed(2);
        fileInfo.textContent = `üìÑ ${file.name} (${sizeMB} MB uploaded)`;
        const arrayBuffer = await file.arrayBuffer();
        pdfBytes = new Uint8Array(arrayBuffer);
        startBtn.disabled = false;
        statusText.textContent = "";
        downloadBtn.style.display = "none";
      }

      startBtn.addEventListener("click", () => {
        if (pdfBytes) {
          startBtn.disabled = true;
          statusText.textContent = "Starting compression...";
          compressPDF(pdfBytes);
        }
      });

      async function compressPDF(pdfData) {
        const target = parseFloat(targetInput.value) || 256;
        const unit = sizeUnit.value;
        const targetBytes =
          unit === "MB" ? target * 1024 * 1024 : target * 1024;
        const pdf = await pdfjsLib.getDocument({ data: pdfData }).promise;

        let quality = 0.9,
          attempt = 0;
        let blob, size;

        while (attempt < 6) {
          const pdfDoc = new jsPDF();
          for (let i = 1; i <= pdf.numPages; i++) {
            const page = await pdf.getPage(i);
            const viewport = page.getViewport({ scale: 1.0 });
            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            canvas.height = viewport.height;
            canvas.width = viewport.width;
            await page.render({ canvasContext: context, viewport }).promise;

            const imgData = canvas.toDataURL("image/jpeg", quality);
            if (i > 1) pdfDoc.addPage();
            pdfDoc.addImage(
              imgData,
              "JPEG",
              0,
              0,
              210,
              (210 * viewport.height) / viewport.width
            );
            statusText.textContent = `Compressing page ${i}/${pdf.numPages}...`;
          }

          blob = pdfDoc.output("blob");
          size = blob.size;
          if (size <= targetBytes || quality <= 0.25) break;

          quality -= 0.15;
          attempt++;
          statusText.textContent = `Adjusting quality... (try ${attempt})`;
        }

        pdfBlob = blob;
        const sizeKB = (pdfBlob.size / 1024).toFixed(1);
        statusText.textContent = `Compression complete! Final size: ${sizeKB} KB`;
        downloadBtn.style.display = "inline-block";
        startBtn.disabled = false;
      }

      function getOutputName(defaultBase) {
        const el = document.getElementById("output-name");
        let name =
          (el && el.value ? el.value : "").trim() || defaultBase || "output";
        name = name.replace(/[\\/:*?"<>|]/g, "-");
        if (!/\.pdf$/i.test(name)) name += ".pdf";
        return name;
      }

      downloadBtn.addEventListener("click", () => {
        if (pdfBlob) {
          const url = URL.createObjectURL(pdfBlob);
          const a = document.createElement("a");
          a.href = url;
          a.download = getOutputName("compressed");
          a.click();
          URL.revokeObjectURL(url);
        }
      });
    </script>

    <script src="../assets/app.js"></script>
  </body>
</html>
