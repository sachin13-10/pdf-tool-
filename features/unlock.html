<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Unlock PDF files: remove password protection instantly. Free online tool  browser-based password removal, no uploads required."
    />
    <title>Unlock PDF - EDITSMYPDF</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../assets/styles.css" />
    <link rel="canonical" href="https://editmypdf.tech/features/unlock.html" />
    <link rel="icon" type="image/png" href="../assets/images/sflogoPNG.PNG" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <style>
      * {
        box-sizing: border-box;
      }

      /* Minimal, aligned layout mirroring Password Protect */
      .unlock-card {
        max-width: 760px;
        margin: 0 auto;
        padding: 2.5rem;
      }
      .unlock-card .upload-box {
        margin-top: 0.6rem;
        margin-bottom: 1.4rem;
        min-height: 160px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.05rem;
      }
      .field {
        max-width: 520px;
        margin: 1.1rem auto 0;
        text-align: left;
      }
      .field label {
        display: block;
        margin: 0.25rem 0 0.45rem;
        color: #444;
        font-weight: 600;
      }
      .field input {
        width: 100%;
      }
      .actions {
        display: flex;
        justify-content: center;
        gap: 0.9rem;
        flex-wrap: wrap;
        margin-top: 1.25rem;
      }
      .file-info {
        margin-top: 0.5rem;
        color: #333;
        font-weight: 500;
        font-size: 0.95rem;
        min-height: 1.1rem;
      }

      /* Enhanced Feature Blog Styles */
      .feature-blog {
        max-width: 700px;
        margin: 3rem auto 0;
        padding: 2rem;
        background: linear-gradient(135deg, #f8faff 0%, #f0f4ff 100%);
        border-left: 5px solid #2563eb;
        border-radius: 16px;
        box-shadow: 0 4px 16px rgba(37, 99, 235, 0.08);
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        line-height: 1.7;
        color: #475569;
      }
      .feature-blog h3 {
        font-size: 1.85rem;
        font-weight: 700;
        color: #1e40af;
        margin: 0 0 1rem;
        line-height: 1.3;
      }
      .feature-blog h4 {
        font-size: 1.35rem;
        font-weight: 600;
        color: #1e40af;
        margin: 2rem 0 0.75rem;
        line-height: 1.4;
      }
      .feature-blog p {
        margin: 0 0 1.25rem;
        font-size: 1.05rem;
      }
      .feature-blog strong {
        color: #334155;
        font-weight: 600;
      }
      .feature-blog ul,
      .feature-blog ol {
        margin: 0 0 1.5rem;
        padding-left: 1.5rem;
      }
      .feature-blog li {
        margin-bottom: 0.75rem;
        font-size: 1.02rem;
      }
      .feature-blog code {
        background: #e0e7ff;
        color: #4338ca;
        padding: 0.2rem 0.5rem;
        border-radius: 6px;
        font-family: "Consolas", "Monaco", monospace;
        font-size: 0.92rem;
      }
      .feature-blog .hero-img {
        width: 100%;
        max-width: 100%;
        height: auto;
        border-radius: 12px;
        margin: 1.5rem 0;
        box-shadow: 0 6px 20px rgba(37, 99, 235, 0.12);
        border: 1px solid #e0e7ff;
      }
      .feature-blog .tip {
        background: #eff6ff;
        border-left: 4px solid #3b82f6;
        border-radius: 10px;
        padding: 1.25rem;
        margin: 1.5rem 0;
        font-size: 1rem;
      }
      .feature-blog .tip strong {
        color: #1e40af;
        display: block;
        margin-bottom: 0.5rem;
      }
      .feature-blog .note {
        background: #fefce8;
        border-left: 4px solid #eab308;
        border-radius: 10px;
        padding: 1.25rem;
        margin: 2rem 0 0;
        font-size: 1.05rem;
        color: #713f12;
      }
      .feature-blog .note a {
        color: #2563eb;
        font-weight: 600;
        text-decoration: none;
        border-bottom: 2px solid transparent;
        transition: border-color 0.2s;
      }
      .feature-blog .note a:hover {
        border-bottom-color: #2563eb;
      }
      .feature-blog details {
        background: #ffffff;
        border: 1px solid #e0e7ff;
        border-radius: 12px;
        padding: 1rem 1.25rem;
        margin-bottom: 1rem;
        box-shadow: 0 2px 8px rgba(37, 99, 235, 0.06);
        transition: all 0.3s ease;
      }
      .feature-blog details:hover {
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.12);
      }
      .feature-blog details[open] {
        background: #f8faff;
        border-color: #3b82f6;
      }
      .feature-blog summary {
        font-weight: 600;
        color: #1e40af;
        cursor: pointer;
        font-size: 1.08rem;
        padding: 0.5rem 0;
        list-style: none;
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }
      .feature-blog summary::-webkit-details-marker {
        display: none;
      }
      .feature-blog summary::before {
        content: "â–¶";
        color: #3b82f6;
        font-size: 0.85rem;
        transition: transform 0.3s;
        flex-shrink: 0;
      }
      .feature-blog details[open] summary::before {
        transform: rotate(90deg);
      }
      .feature-blog details p {
        margin-top: 0.75rem;
        padding-left: 1.5rem;
        color: #64748b;
        font-size: 1rem;
      }
      @media (max-width: 640px) {
        .feature-blog {
          padding: 1.5rem;
          margin: 2rem 0.5rem 0;
        }
        .feature-blog h3 {
          font-size: 1.5rem;
        }
        .feature-blog h4 {
          font-size: 1.15rem;
        }
        .feature-blog p,
        .feature-blog li {
          font-size: 0.98rem;
        }
      }
    </style>
  </head>
  <body>
    <header data-include="navbar"></header>
    <div id="ad-top" class="ad-slot"></div>

    <main class="feature">
      <h2>Unlock PDF</h2>
      <p class="sub">
        Remove the password protection from the pdf Only unlock PDFs you own or
        have explicit permission to modify.
      </p>

      <div class="card feature-enter unlock-card">
        <label class="upload-box" id="drop-zone">
          ðŸ“„ Drop your PDF here or click to upload
          <input
            type="file"
            id="file-input"
            accept="application/pdf"
            style="display: none"
          />
        </label>

        <div id="file-info" class="file-info"></div>

        <div class="field">
          <label for="password"> Password </label>
          <input
            type="password"
            id="password"
            placeholder="Enter password of your PDF-FILE"
          />
        </div>

        <div class="field">
          <label for="output-name">Output filename</label>
          <input
            type="text"
            id="output-name"
            placeholder="e.g., unlocked"
            value="unlocked"
          />
        </div>

        <div class="actions">
          <button id="unlock-btn" class="primary" disabled>Unlock PDF</button>
        </div>
        <div id="status" class="progress"></div>
        <div class="actions">
          <button id="download-btn" class="primary" style="display: none">
            Download Unlocked PDF
          </button>
        </div>
      </div>
      <div id="ad-content" class="ad-slot"></div>

      <section class="feature-blog" aria-labelledby="unlock-guide-title">
        <div class="title-with-logo">
          <img
            src="../assets/images/sflogoPNG.PNG"
            alt="PDF Tools Logo"
            class="brand-logo"
          />
          <h3 id="unlock-guide-title">
            Unlock your PDFs and remove password from the pdfs with few clicks
          </h3>
        </div>

        <p>
          <strong
            >Are you exhausted for keep entering the same password again and
            again for the same pdf ?</strong
          >
          Our tool is very usefull for this problem because the unlock pdf is
          very efficiently designed to remove the password protection from the
          pdf. The processe of unlocking happens
          <strong>entirely in your browser</strong>your file never leaves your
          device. Which is Very Perfect for accessing your own
          password-protected documents more easily and which Enhances the
          privacy for the users
        </p>

        <img
          src="../assets/images/unlocked pdf - Copy.JPG"
          alt="Unlock password-protected PDF"
          class="hero-img"
        />

        <h4>HOW IT WORKS</h4>
        <p>
          The unlock tool grabs your password-protected PDF file. It uses the
          password that you supply to get in. Then it decrypts all the content
          right there in your browser. After that, it puts together a fresh PDF
          with no password at all. The whole process runs locally,
          <strong>just with JavaScript doing the work.</strong>
          Nothing gets uploaded to any server. No one collects your data either.
          You download the unlocked version pretty much right away. And from
          then on, you open it freely whenever you want.
        </p>

        <p>
          Imagine taking a photocopy of a page from a locked diary. You stick
          that copy right into some ordinary notebook with no lock on it. The
          original page stays locked up tight. You still need the key for that,
          the password to get in. But now with your copy made, anyone can just
          open the notebook and read it. No barriers at all.
        </p>

        <h4>Why to use this tool</h4>
        <ul>
          <li>
            <strong>Convenience</strong> - Stop entering the same password
            repeatedly for your own files
          </li>
          <li>
            <strong>Workflow efficiency</strong> - Integrate PDFs into automated
            processes or batch operations
          </li>
          <li>
            <strong>Compatibility</strong> - Work with PDF readers or apps that
            don't support password prompts
          </li>
          <li>
            <strong>Archive access</strong> - Keep unlocked copies of old
            documents for easier retrieval
          </li>
          <li>
            <strong>Device freedom</strong> - Open files on devices where you
            can't easily type complex passwords
          </li>
          <li>
            <strong>conclusion</strong> -One way to handle this involves pulling
            PDFs right into automated setups or running them through batch jobs.
            That makes things flow without constant interruptions. Sometimes PDF
            viewers or certain apps just do not handle password requests at all.
            They skip over that step entirely. Other readers and programs face
            the same issue with those prompts. It leads to frustration when
            access gets blocked unexpectedly. Holding onto versions of older
            files without locks helps with quick pulls from storage. No need to
            fuss with keys every time. Devices like tablets or touch screens
            often make entering tricky passwords a real hassle. Files open
            smoothly when protection is out of the picture.
          </li>
        </ul>

        <h4>Complete Privacy</h4>
        <p>
          Your PDF file along with the password stays right on your computer all
          the time. The unlocking process takes place directly inside your
          browser through pdf-lib. No files ever get uploaded to a server
          anywhere. That setup makes a big difference when dealing with
          sensitive items such as contracts, financial records, medical files,
          or personal identification documents.
        </p>

        <div class="tip">
          <strong> Your Privacy Matters to us a lot </strong><br />
          All processing happens right on the client side. Everything stays
          secure on your device. No part of it leaves your control.<br />
          There are no uploads to any servers at all. Your document never hits
          the online world. It remains completely private.<br />
          Passwords get handled without any logging from us. We never catch
          sight of them. Nor do we save a single one.
          <br />
          The whole thing works offline too. You can unlock those files. Even if
          there is no internet connection around.
        </div>

        <h4>Important Legal Notice for all the users</h4>
        <p>
          <strong
            >Only use this tool for the pdf which you own or have explicit
            permission to unlock the pdf</strong
          >
          Taking off password protection from documents without proper
          authorization to change them can break copyright laws. It might also
          violate employment contracts. There could be other legal rules
          involved too. This tool gets made for real personal needs. Think about
          reaching your own old stored files. Or pulling passwords you added on
          your own. Or dealing with papers where the owner lets you in.
        </p>

        <h4>Best way</h4>
        <p>
          Unlocking a PDF file turns out to be straightforward enough. The key
          thing involves managing that same file with real care afterward. Ways
          exist to keep security intact. Common errors can get avoided too.
        </p>
        <ul>
          <li>
            <strong>Keep a secure backup of your private pdfs</strong> It is
            advisable to keep a password-protected version of any sensitive
            documents stored securely. Options include an encrypted drive or a
            password manager, along with secure cloud storage. While it might
            seem convenient to unlock files for easier access, evidence suggests
            maintaining a locked master copy remains essential. This approach
            helps protect against risks if an unlocked version falls into
            unauthorized hands.
          </li>
          <li>
            <strong
              >Don't share the unlocked pdf to anyone without proper
              analysis</strong
            >
            Removing the password from a document does not make it suitable for
            sharing with everyone. The file might have been protected originally
            because it contains private details or important secrets. The
            unlocked copy still needs the same careful handling as before. Send
            it through encrypted email if necessary. Choose secure methods for
            transferring files. Limit access to only those who have permission
            to see it.
          </li>
          <li>
            <strong>Use resposibly and in ethical way </strong>
            You should only remove password protection from files that you
            personally own. Or from those where you have clear written
            permission to make changes. Taking that protection off your
            employer's confidential documents can cause real issues. The same
            goes for copyrighted materials you do not own. Or files that come
            with legal restrictions. Such actions might break contracts in
            place. They could violate copyright laws as well. Employment
            agreements might get crossed too. If doubt creeps in at all, just
            ask someone first.
          </li>
          <li>
            <strong
              >Use a secured storage or folder for the storing the unlocked
              PDF</strong
            >
            When you unlock a PDF that holds sensitive stuff like financial
            records or personal info or legal papers, its best to keep it safe
            in some encrypted folder. Or maybe on a drive thats password
            protected. You could use secure cloud storage too, as long as two
            factor authentication is turned on. If you just leave those unlocked
            files sitting in regular folders with no protection, youre really
            inviting problems. Especially if your device ends up lost or stolen
            or even hacked somehow.
          </li>
          <li>
            <strong>Verify the permission</strong> When a person sends over a
            password-protected PDF file, it makes sense to check if opening or
            changing it is okay. Just reach out to them and say something like,
            Can I remove the password for easier access. That kind of
            straightforward inquiry helps avoid any potential legal troubles
            down the line. It is always wiser to play it safe in these
            situations.
          </li>
          <li>
            <strong>use the protect pdf feature for relocking the pdf</strong>
            If someone requires just temporary access to the unlocked file. Say,
            for copying a few pages or extracting some text from it. Then it
            makes sense to consider using
            <a href="./protect.html">Protect PDF tool by us </a>this is used to
            relock the pdf after your work done
          </li>
        </ul>

        <h4>ðŸ”“ When to lock and unlock the pdfs</h4>
        <p>
          Unlocking isn't always the right move. Here's when it makes sense and
          when you should reconsider:
        </p>
        <p>
          <strong>Valid reson to unlock </strong>
          People sometimes store away old documents that they locked up with
          passwords they created themselves. Now those files come up a lot in
          daily work, and entering the password over and over just slows
          everything down. A coworker might send over a real document that has
          the right clearance to open, mainly so it can get edited or printed
          without hassle. The same goes for handling personal stuff like tax
          forms, agreements, or private notes that started out protected but do
          not really need that lock anymore.
        </p>
        <p>
          <strong>Invalid reson to unlock</strong>
          Bypassing security features on documents that someone else owns or
          that you lack permission to alter always leads to trouble. Removing
          passwords from materials under copyright protection or from employer
          systems or any legally protected files demands clear authorization
          every time. Peeking into a locked file just to check contents when it
          clearly was not intended for access like that. Such actions go beyond
          mere ethics violations. They often cross into illegal territory too
          depending on the specific details involved and local laws in place.
        </p>
        <p>
          <strong>The Gray Area:</strong> Forgetting the password for an
          important document often leads to urgent frustration over gaining
          access. Evidence shows that without recalling it exactly, tools like
          this one provide no assistance at all. Decryption demands the precise
          password every time. No simple recovery option exists in such cases.
          Maintaining records of passwords in secure systems, whether through
          managers or protected notes, therefore appears essential for avoiding
          these issues.
        </p>
        <p>
          <strong>Pro tip:</strong>
          Suppose you need to unlock a PDF for just a short time. Maybe its for
          something like editing the file or pulling out a few pages. You ought
          to delete that unlocked copy right after you finish up. Keep the
          original one that has the password on it. That approach, where you
          unlock the thing, use it for your task, then toss the unlocked
          version, really helps cut down on security issues. It works best for
          documents that hold really important information.
        </p>

        <h4>Quick</h4>
        <ol>
          <li>
            <strong>Upload your PDF here</strong> Click or drag your
            password-protected file into the upload area
          </li>
          <li>
            <strong>Enter password:</strong> Type the correct password in the
            password field
          </li>
          <li>
            <strong>Set output name:</strong> Choose a descriptive filename for
            your unlocked PDF
          </li>
          <li>
            <strong>Unlock PDF:</strong> Click the button to process and remove
            password protection
          </li>
          <li>
            <strong>Download:</strong> Save your unlocked PDF and open it freely
            without password prompts!
          </li>
        </ol>

        <h4>Frequently Questions aseked by users</h4>
        <details>
          <summary>Will this work without the correct password?</summary>
          <p>
            No, you need to enter the correct password to open up the PDF file.
            This tool does not crack passwords or find ways around them in any
            sense. Instead, it simply decrypts the file once you provide the
            right password. That is exactly how any regular PDF reader handles
            things.
          </p>
        </details>

        <details>
          <summary>Does removing the password changes any content?</summary>
          <p>
            No. The unlocked PDF contains exactly the same content, pages
            formatting, and metadata as the original. The only change is the
            removal of the password requirement to open the file.
          </p>
        </details>

        <details>
          <summary>Can I re-lock the PDF later?</summary>
          <p>
            Yes! You can use our Password Protect tool to add a password back to
            any unlocked PDF. This is useful if you need temporary access but
            want to secure it again afterward.
          </p>
        </details>

        <details>
          <summary>What if the PDF has editing restrictions?</summary>
          <p>
            PDFs can have two types of passwords: one to open the file, and one
            to allow editing/printing. This tool focuses on removing the "open"
            password. Editing restrictions are advisory and may still appear in
            some readers even after unlocking.
          </p>
        </details>

        <details>
          <summary>Is this legal?</summary>
          <p>
            Using this tool on PDFs that belong to you is perfectly legal. The
            same holds true for files where you have clear permission to make
            changes. Evidence shows that attempting to unlock restricted
            documents without proper authorization could lead to violations of
            copyright laws. It might also breach existing agreements or terms of
            use. Studies indicate users should always verify their rights before
            modifying any file. This approach helps avoid potential legal
            issues.
          </p>
        </details>

        <details>
          <summary>Why does my original file still ask for a password?</summary>
          <p>
            This tool generates a fresh copy of the PDF, and that one comes
            without any lock. The original file stays completely unchanged. It
            remains fully password-protected right on the device where it is
            stored. Both versions exist now. Select the suitable one based on
            the situation at hand.
          </p>
        </details>

        <div class="note">
          Ready to remove password protection? Upload your PDF, enter the
          password, and download your unlocked copy in seconds.
          <a href="#file-input">Try it now </a>
        </div>
      </section>
    </main>
    <div id="ad-footer" class="ad-slot"></div>
    <div data-include="footer"></div>

    <script>
      const pdfjsLib = window["pdfjs-dist/build/pdf"];
      if (pdfjsLib && pdfjsLib.GlobalWorkerOptions) {
        pdfjsLib.GlobalWorkerOptions.workerSrc =
          "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js";
      }

      const dropZone = document.getElementById("drop-zone");
      const fileInput = document.getElementById("file-input");
      const fileInfo = document.getElementById("file-info");
      const unlockBtn = document.getElementById("unlock-btn");
      const statusText = document.getElementById("status");
      const downloadBtn = document.getElementById("download-btn");
      const passwordInput = document.getElementById("password");

      let srcBytes = null;
      let outBlob = null;

      dropZone.addEventListener("dragover", (e) => {
        e.preventDefault();
        dropZone.classList.add("dragover");
      });
      dropZone.addEventListener("dragleave", () =>
        dropZone.classList.remove("dragover")
      );
      dropZone.addEventListener("drop", async (e) => {
        e.preventDefault();
        dropZone.classList.remove("dragover");
        const f = e.dataTransfer.files[0];
        if (f) await loadFile(f);
      });
      fileInput.addEventListener("click", (e) => e.stopPropagation());
      fileInput.addEventListener("change", async (e) => {
        const f = e.target.files[0];
        if (f) await loadFile(f);
        e.target.value = "";
      });

      async function loadFile(f) {
        const sizeMB = (f.size / (1024 * 1024)).toFixed(2);
        fileInfo.textContent = `ðŸ“„ ${f.name} (${sizeMB} MB uploaded)`;
        const buf = await f.arrayBuffer();
        srcBytes = new Uint8Array(buf);
        unlockBtn.disabled = false;
        statusText.textContent = "";
        downloadBtn.style.display = "none";
      }

      function getOutputName(defaultBase) {
        const el = document.getElementById("output-name");
        let name =
          (el && el.value ? el.value : "").trim() || defaultBase || "output";
        name = name.replace(/[\\/:*?"<>|]/g, "-");
        if (!/\.pdf$/i.test(name)) name += ".pdf";
        return name;
      }

      async function renderToImagesWithPassword(bytes, password) {
        // Attempt to open with provided password. If wrong/missing, will throw PasswordException.
        const task = pdfjsLib.getDocument({
          data: bytes,
          password: password || undefined,
        });
        const pdf = await task.promise; // will reject on incorrect password
        const pages = [];
        for (let i = 1; i <= pdf.numPages; i++) {
          const page = await pdf.getPage(i);
          const viewport = page.getViewport({ scale: 2.0 });
          const canvas = document.createElement("canvas");
          const ctx = canvas.getContext("2d");
          canvas.width = Math.floor(viewport.width);
          canvas.height = Math.floor(viewport.height);
          await page.render({ canvasContext: ctx, viewport }).promise;
          pages.push({ canvas, width: canvas.width, height: canvas.height });
        }
        return pages;
      }

      async function buildPDFViaPdfLib(pages) {
        const out = await PDFLib.PDFDocument.create();
        for (let i = 0; i < pages.length; i++) {
          const pg = pages[i];
          const imgBytes = await new Promise((res) =>
            pg.canvas.toBlob(
              (b) => {
                const r = new FileReader();
                r.onload = () => res(new Uint8Array(r.result));
                r.readAsArrayBuffer(b);
              },
              "image/jpeg",
              0.92
            )
          );
          const img = await out.embedJpg(imgBytes);
          const page = out.addPage([img.width, img.height]);
          page.drawImage(img, {
            x: 0,
            y: 0,
            width: img.width,
            height: img.height,
          });
        }
        const bytes = await out.save();
        return new Blob([bytes], { type: "application/pdf" });
      }

      // Fast path: if the PDF is not encrypted, simply copy pages using pdf-lib to preserve vector quality
      async function tryFastCopyViaPdfLib(bytes) {
        try {
          const srcDoc = await PDFLib.PDFDocument.load(bytes);
          const out = await PDFLib.PDFDocument.create();
          const pages = await out.copyPages(srcDoc, srcDoc.getPageIndices());
          pages.forEach((p) => out.addPage(p));
          const outBytes = await out.save();
          return new Blob([outBytes], { type: "application/pdf" });
        } catch (e) {
          // Likely encrypted or unsupported by pdf-lib; return null to trigger rasterization fallback
          return null;
        }
      }

      unlockBtn.addEventListener("click", async () => {
        if (!srcBytes) {
          statusText.textContent = "Please upload a PDF first.";
          return;
        }
        unlockBtn.disabled = true;
        statusText.textContent = "Checking encryption and unlocking...";
        try {
          // 1) Try fast vector-preserving copy for non-encrypted PDFs
          outBlob = await tryFastCopyViaPdfLib(srcBytes);
          if (outBlob) {
            statusText.textContent =
              "Unlocked (no encryption detected). Ready to download.";
            downloadBtn.style.display = "inline-block";
            return;
          }

          // 2) Fallback: open with password via pdf.js, rasterize pages, rebuild unencrypted PDF
          statusText.textContent =
            "Encrypted PDF detected. Rendering pages (this may take a moment)...";
          const enteredPassword = passwordInput.value || undefined;
          const pages = await renderToImagesWithPassword(
            srcBytes,
            enteredPassword
          );
          statusText.textContent = "Rebuilding unlocked PDF...";
          outBlob = await buildPDFViaPdfLib(pages);
          downloadBtn.style.display = "inline-block";
          statusText.textContent = "Unlocked PDF is ready.";
        } catch (e) {
          console.error(e);
          // Distinguish wrong password vs other errors
          if (e && e.name === "PasswordException") {
            if (/incorrect/i.test(e.message)) {
              statusText.textContent = "Incorrect password. Please try again.";
            } else if (/password/i.test(e.message)) {
              statusText.textContent =
                "Password required. Enter it above and press Unlock.";
            } else {
              statusText.textContent = "Could not unlock: password error.";
            }
          } else {
            statusText.textContent =
              "Failed to unlock PDF (unsupported encryption or corrupt file).";
          }
        } finally {
          unlockBtn.disabled = false;
        }
      });

      downloadBtn.addEventListener("click", () => {
        if (!outBlob) return;
        const url = URL.createObjectURL(outBlob);
        const a = document.createElement("a");
        a.href = url;
        a.download = getOutputName("unlocked");
        a.click();
        URL.revokeObjectURL(url);
      });

      // "Try it now" link functionality
      document.addEventListener("DOMContentLoaded", function () {
        const tryLinks = document.querySelectorAll('a[href="#file-input"]');
        tryLinks.forEach((link) => {
          link.addEventListener("click", function (e) {
            e.preventDefault();
            const fileInput = document.getElementById("file-input");
            if (fileInput) {
              fileInput.click();
              setTimeout(() => {
                window.scrollTo({ top: 0, behavior: "smooth" });
              }, 100);
            }
          });
        });
      });
    </script>
    <script src="../assets/app.js"></script>
  </body>
</html>
